

#include <SoftwareSerial.h>
#include <Servo.h>
#include <Ultrasonic.h>
#include <Wire.h>
#include <LiquidCrystal_I2C.h>

SoftwareSerial ss(10,13);

// LCD I2C
LiquidCrystal_I2C lcd(0x27, 16, 2);

// Motor Servo
Servo myServo1; // Automatic Door
Servo myServo2; // Classification Type of Waste

// Ultrasonic
Ultrasonic ultrasonic1(2, 3); // Metal Volume
Ultrasonic ultrasonic2(4, 5); // Non-Metal Volume
Ultrasonic ultrasonic3(7, 6); // Distance Person for Automatic Door

// Proximity Inductive
const int inductivePin = 11; // Sensor LJ12A3-4-Z/BY PNP NO Inductive

// Proximity Capacitive
const int capacitivePin = 12; // LJC18A3-B-Z/BY PNP NO Capacitive

void setup() {
  Serial.begin(9600);
  ss.begin(115200);

  myServo1.attach(8);
  myServo2.attach(9);

  pinMode(inductivePin, INPUT);
  pinMode(capacitivePin, INPUT);

  lcd.init();
  lcd.backlight();
}

void loop() {

  //int irSensorValue = digitalRead(irSensorPin);
  int inductiveSensorValue = digitalRead(inductivePin);
  int capacitiveSensorValue = digitalRead(capacitivePin);

  long distance1 = ultrasonic1.read();
  long distance2 = ultrasonic2.read();
  long distance3 = ultrasonic3.read();

  Serial.print("V.Metal      :");
  Serial.print(distance1);
  Serial.println(" cm");

  Serial.print("V.Non-Metal  :");
  Serial.print(distance2);
  Serial.println(" cm");

  Serial.print("Jarak: ");
  Serial.print(distance3);
  Serial.println(" cm");

  delay(1000);
  String sendToESP ="";
  sendToESP += distance1;
  sendToESP += ";";
  sendToESP += distance2;
  ss.println(sendToESP);
  delay(1000);

  lcd.clear();
  lcd.setCursor(1, 0);
  lcd.print("Smart Trash Bin");

  delay(1000);

  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("V.Metal    :");
  lcd.print(distance1);
  lcd.setCursor(0, 1);
  lcd.print("V.NonMetal :");
  lcd.print(distance2);

  delay(1000);
